import { PlaybackSession as PlaybackSessionModel } from '../../core/database/models/playback-session.model';
import { User } from '../../core/database/models/user.model';
import { LibraryItem } from '../../core/database/models/library-item.model';
import { Device } from '../../core/database/models/device.model';
import { LoggerService } from '../../core/logger/logger.service';
import { SocketGateway } from '../../core/socket/socket.gateway';
import { GlobalConfigService } from '../../core/config/global-config.service';
import { StreamFactoryService, StreamService } from './stream.service';
export declare class PlaybackSession {
    id: string;
    userId: string;
    libraryItemId: string;
    episodeId: string | null;
    mediaType: string;
    mediaMetadata: any;
    displayTitle: string;
    displaySubtitle: string | null;
    playMethod: string;
    mediaPlayer: string;
    deviceInfo: any;
    deviceId: string;
    deviceDescription: string;
    startTime: number;
    currentTime: number;
    startedAt: number;
    updatedAt: number;
    audioTracks: any[];
    stream: StreamService | null;
    constructor();
    setData(libraryItem: any, userId: string, mediaPlayer: string, deviceInfo: any, startTime: number, episodeId?: string | null): void;
    toJSON(): {
        id: string;
        userId: string;
        libraryItemId: string;
        episodeId: string;
        mediaType: string;
        mediaMetadata: any;
        displayTitle: string;
        displaySubtitle: string;
        playMethod: string;
        mediaPlayer: string;
        deviceInfo: any;
        deviceId: string;
        deviceDescription: string;
        startTime: number;
        currentTime: number;
        startedAt: number;
        updatedAt: number;
        audioTracks: any[];
    };
}
export declare class PlaybackSessionManagerService {
    private readonly playbackSessionModel;
    private readonly deviceModel;
    private readonly logger;
    private readonly socketGateway;
    private readonly configService;
    private readonly streamFactory;
    private sessions;
    private streamsPath;
    constructor(playbackSessionModel: typeof PlaybackSessionModel, deviceModel: typeof Device, logger: LoggerService, socketGateway: SocketGateway, configService: GlobalConfigService, streamFactory: StreamFactoryService);
    getStream(sessionId: string): StreamService | null;
    getSessions(): PlaybackSession[];
    getSession(sessionId: string): PlaybackSession | null;
    getUserSessions(userId: string): PlaybackSession[];
    startSession(user: User, deviceInfo: any, libraryItem: LibraryItem, episodeId: string | null, options: {
        forceDirectPlay?: boolean;
        forceTranscode?: boolean;
        mediaPlayer: string;
        supportedMimeTypes?: string[];
    }): Promise<PlaybackSession>;
    syncSession(user: User, session: PlaybackSession, syncData: any): Promise<boolean>;
    closeSession(user: User, session: PlaybackSession, syncData: any): Promise<void>;
    removeSession(sessionId: string): Promise<void>;
    private checkCanDirectPlay;
    private getTrackList;
    private saveSession;
    private updateSession;
    closeStaleOpenSessions(): Promise<void>;
}
